---
// BaseLayout.astro - Tüm sayfalarda kullanılacak ortak temel düzen
import Navigation from '../components/Navigation.astro';

const { pageTitle, description = "İstanbul'da bina güçlendirme, karbon fiber, kolon, kiriş güçlendirme hizmetleri. CFRP uygulamalarında uzman ekip." } = Astro.props;

// Sayfa tipine göre maksimum genişlik ayarı
// Blog detay sayfası için dar (800px), diğer tüm sayfalar için daha geniş (1200px)
const currentPath = Astro.url.pathname;
const isBlogDetail = currentPath.startsWith('/blog/') && currentPath !== '/blog/';
---

<html lang="tr">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{pageTitle}</title>
		<meta name="description" content={description} />
		<!-- Performans optimizasyonları -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<!-- Compresyon ve cache kullanımını belirt -->
		<meta http-equiv="Cache-Control" content="max-age=604800" />
		<meta http-equiv="x-content-type-options" content="nosniff" />
		<!-- SEO iyileştirmeleri -->
		<link rel="canonical" href={new URL(Astro.url.pathname, Astro.site).href} />
		<meta name="robots" content="index, follow" />
		<meta property="og:title" content={pageTitle} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content={new URL(Astro.url.pathname, Astro.site).href} />
		<!-- Kritik CSS satır içi olarak yükleniyor -->
		<style>
			/* Kritik CSS - Sayfa yüklenirken öncelikli gösterilecek stil tanımları */
			body{margin:0;font-family:Arial,sans-serif;line-height:1.6;color:#333}
			header{margin-bottom:20px;padding:0 20px}
			h1{margin-top:0;margin-bottom:15px;line-height:1.2}
			.nav-container{margin-bottom:30px}
			.main-nav{display:flex;gap:10px;align-items:center;margin:10px 0}
		</style>
		<slot name="head" />
	</head>
	<body>
		<header class="standard-header">
			<h1>{pageTitle}</h1>
			<Navigation />
		</header>
		
		<main class={isBlogDetail ? "blog-detail-page" : "wide-page"}>
			<slot />
		</main>
		
		<footer class="standard-footer">
			<p>© {new Date().getFullYear()} İstanbul Bina Güçlendirme</p>
		</footer>
	</body>
	<!-- JavaScript yükleme optimizasyonu -->
	<script>
		// LCP (Largest Contentful Paint) performansını iyileştirme
		document.addEventListener('DOMContentLoaded', () => {
			// Görsel yükleme optimizasyonu
			if ('loading' in HTMLImageElement.prototype) {
				// Tarayıcı native lazy-loading destekliyorsa
				document.querySelectorAll('img[loading="lazy"]').forEach((element) => {
					const img = element as HTMLImageElement;
					// Görsel zaten viewport içindeyse hemen yükle
					if (img.getBoundingClientRect().top < window.innerHeight) {
						img.loading = 'eager';
						img.setAttribute('fetchpriority', 'high');
					}
				});
			}
			
			// Genişlik/Yükseklik değerlerini eksik olan görsellere ekle
			document.querySelectorAll('img:not([width]):not([height])').forEach((element) => {
				const img = element as HTMLImageElement;
				// Eksik boyut değerlerini varsayılan olarak ekle
				if (!img.width) img.width = 400;
				if (!img.height) img.height = 225;
			});
		});
	</script>
</html>

<style is:global>
  /* Renk paleti ve global değişkenler */
  :root {
    /* Boyut değişkenleri */
    --max-width-wide: 1200px;
    --max-width-blog-detail: 800px;
    --max-width-standard: 800px;
    --card-min-width: 280px;
    
    /* Renk paleti */
    --color-primary: #0066cc;
    --color-primary-dark: #004d99;
    --color-primary-light: #e6f0fa;
    --color-text: #333;
    --color-text-light: #666;
    --color-background: #fff;
    --color-border: #eaeaea;
    --color-border-dark: #ddd;
    --color-grey-light: #f5f5f5;
    --color-grey-medium: #eee;
    
    /* Gölge stilleri */
    --shadow-sm: 0 3px 10px rgba(0,0,0,0.08);
    --shadow-md: 0 8px 20px rgba(0,0,0,0.1);
    --shadow-lg: 0 12px 25px rgba(0,0,0,0.15);
    
    /* Geçiş süreleri */
    --transition-fast: 0.2s;
    --transition-normal: 0.3s;
    --transition-slow: 0.5s;
    
    /* Kenar yuvarlaklığı */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
  }
  
  /* Reset ve temel stiller */
  * {
    box-sizing: border-box;
  }
  
  body {
    font-family: Arial, sans-serif;
    margin: 0 auto;
    padding: 20px;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    color: var(--color-text);
    background-color: var(--color-background);
  }
  
  /* Container stiller */
  .standard-header, .standard-footer {
    width: 100%;
    max-width: var(--max-width-standard);
    margin: 0 auto;
  }
  
  .wide-page {
    max-width: var(--max-width-wide);
    width: 100%;
  }
  
  .blog-detail-page {
    max-width: var(--max-width-blog-detail);
    width: 100%;
  }
  
  /* Header ve footer */
  header {
    margin-bottom: 20px;
    /* Header'a sabit yükseklik ekleyelim */
    min-height: 150px;
  }
  
  header h1 {
    margin-top: 0;
    margin-bottom: 15px;
    /* Başlık boyutunu sınırlayalım */
    max-height: 2.5em;
    line-height: 1.2;
    overflow: hidden;
  }
  
  footer {
    margin-top: 30px;
    border-top: 1px solid var(--color-border-dark);
    padding-top: 10px;
    font-size: 0.9em;
    color: var(--color-text-light);
    text-align: center;
  }
  
  /* Link stiller */
  a {
    text-decoration: none;
    color: var(--color-primary);
    transition: color var(--transition-fast);
  }
  
  a:hover, 
  a:focus {
    text-decoration: none;
    border-bottom: none;
    color: var(--color-primary-dark);
  }
  
  /* Kart ve liste elemanları için ortak stiller */
  .card {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 15px;
    background-color: var(--color-background);
    box-shadow: var(--shadow-sm);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  }
  
  .card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
  }
  
  .btn {
    display: inline-block;
    text-align: center;
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    font-weight: 500;
    transition: all var(--transition-fast);
  }
  
  .btn-primary {
    background-color: var(--color-primary);
    color: white;
  }
  
  .btn-primary:hover {
    background-color: var(--color-primary-dark);
  }
  
  /* Mobil uyumluluk için */
  @media (max-width: 768px) {
    :root {
      --card-min-width: 240px;
    }
    
    body {
      padding: 15px;
    }
    
    .standard-header, .standard-footer,
    .wide-page, .blog-detail-page {
      width: 95%;
    }
  }
  
  @media (min-width: 1600px) {
    :root {
      --max-width-wide: 1400px;
    }
  }
</style> 